<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§£å‹å²è±å§†æ¨¡æ‹Ÿå™¨ ğŸŸ¢</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0c0c2e, #1a1a3e);
            color: #e0e0ff;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            border-bottom: 2px solid #4a4aff;
            margin-bottom: 20px;
        }
        
        h1 {
            color: #7afcff;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(122, 252, 255, 0.7);
        }
        
        .subtitle {
            color: #b0b0ff;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }
        
        .game-area {
            flex: 1;
            min-width: 300px;
            background: rgba(20, 20, 60, 0.7);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid #333377;
        }
        
        .slime-container {
            position: relative;
            width: 100%;
            height: 400px;
            background: rgba(10, 10, 40, 0.8);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            border: 2px solid #444499;
            display: flex;
            justify-content: center;
            align-items: center;
            user-select: none;
            -webkit-user-select: none;
            touch-action: none;
        }
        
        #slime {
            position: absolute;
            cursor: pointer;
            transition: transform 0.1s;
            filter: drop-shadow(0 10px 15px rgba(0, 0, 0, 0.5));
        }
        
        .controls {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .control-group {
            flex: 1;
            min-width: 200px;
            background: rgba(30, 30, 80, 0.6);
            border-radius: 12px;
            padding: 20px;
        }
        
        h2 {
            color: #7afcff;
            margin-bottom: 15px;
            font-size: 1.5rem;
            border-bottom: 1px solid #4a4aff;
            padding-bottom: 8px;
        }
        
        .slime-types {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 10px;
        }
        
        .slime-type {
            flex: 1;
            min-width: 80px;
            height: 60px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            border: 2px solid transparent;
        }
        
        .slime-type:hover {
            transform: translateY(-5px);
            border-color: #7afcff;
        }
        
        .slime-type.active {
            border-color: #7afcff;
            box-shadow: 0 0 15px rgba(122, 252, 255, 0.7);
            transform: translateY(-5px);
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-box {
            background: rgba(30, 30, 80, 0.6);
            border-radius: 12px;
            padding: 15px;
            flex: 1;
            min-width: 150px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .stat-box:hover {
            background: rgba(40, 40, 100, 0.8);
            transform: translateY(-5px);
        }
        
        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #7afcff;
            margin: 5px 0;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #b0b0ff;
        }
        
        button {
            background: linear-gradient(135deg, #4a4aff, #7afcff);
            color: #0c0c2e;
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1rem;
            margin: 5px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 15px rgba(122, 252, 255, 0.4);
        }
        
        button:active {
            transform: translateY(1px);
        }
        
        .achievements {
            margin-top: 25px;
        }
        
        .achievement-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        
        .achievement {
            background: rgba(30, 30, 80, 0.6);
            border-radius: 10px;
            padding: 12px;
            flex: 1;
            min-width: 180px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: all 0.3s;
        }
        
        .achievement.unlocked {
            background: rgba(40, 80, 40, 0.6);
            border-left: 4px solid #7afcff;
        }
        
        .achievement i {
            font-size: 1.5rem;
            color: #ffcc00;
        }
        
        .instructions {
            margin-top: 25px;
            padding: 20px;
            background: rgba(30, 30, 80, 0.6);
            border-radius: 15px;
            line-height: 1.6;
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            opacity: 0.7;
        }
        
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #333377;
            color: #8888cc;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .slime-container {
                height: 300px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
        }
        
        /* æŒ¯åŠ¨æ•ˆæœ */
        @keyframes vibrate {
            0% { transform: translate(0); }
            10% { transform: translate(-2px, -2px); }
            20% { transform: translate(2px, -2px); }
            30% { transform: translate(-2px, 2px); }
            40% { transform: translate(2px, 2px); }
            50% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, -2px); }
            70% { transform: translate(-2px, 2px); }
            80% { transform: translate(2px, 2px); }
            90% { transform: translate(-2px, -2px); }
            100% { transform: translate(0); }
        }
        
        .vibrate {
            animation: vibrate 0.3s linear;
        }
        
        /* å¼¹è·³æ•ˆæœ */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-30px); }
        }
        
        .bounce {
            animation: bounce 0.8s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-blender-phone"></i> è§£å‹å²è±å§†æ¨¡æ‹Ÿå™¨</h1>
            <p class="subtitle">ç‚¹å‡»ã€æ‹–æ‹½ã€æ‹‰ä¼¸ã€æŒ¤å‹è¿™åªå¯çˆ±çš„å²è±å§†æ¥ç¼“è§£å‹åŠ›ï¼å°è¯•ä¸åŒçš„å²è±å§†ç±»å‹ï¼Œè§£é”æˆå°±ï¼Œäº«å—ASMRèˆ¬çš„è§£å‹ä½“éªŒã€‚</p>
        </header>
        
        <div class="main-content">
            <div class="game-area">
                <div class="slime-container" id="slimeContainer">
                    <div id="slime" class="slime-default"></div>
                </div>
                
                <div class="controls">
                    <div class="control-group">
                        <h2><i class="fas fa-palette"></i> å²è±å§†ç±»å‹</h2>
                        <div class="slime-types">
                            <div class="slime-type active" style="background: linear-gradient(135deg, #4CAF50, #8BC34A);" data-type="classic">ç»å…¸</div>
                            <div class="slime-type" style="background: linear-gradient(135deg, #2196F3, #03A9F4);" data-type="jelly">æœå†»</div>
                            <div class="slime-type" style="background: linear-gradient(135deg, #9C27B0, #E91E63);" data-type="glitter">äº®ç²‰</div>
                            <div class="slime-type" style="background: linear-gradient(135deg, #FF9800, #FFC107);" data-type="bouncy">å¼¹è·³</div>
                            <div class="slime-type" style="background: linear-gradient(135deg, #00BCD4, #009688);" data-type="gooey">ç²˜ç¨ </div>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <h2><i class="fas fa-gamepad"></i> äº’åŠ¨</h2>
                        <div>
                            <button id="bounceBtn"><i class="fas fa-basketball-ball"></i> å¼¹è·³</button>
                            <button id="shakeBtn"><i class="fas fa-bolt"></i> æŒ¯åŠ¨</button>
                            <button id="resetBtn"><i class="fas fa-redo"></i> é‡ç½®</button>
                            <button id="soundToggle"><i class="fas fa-volume-up"></i> éŸ³æ•ˆ</button>
                        </div>
                    </div>
                </div>
                
                <div class="stats">
                    <div class="stat-box">
                        <div class="stat-label">æ‹‰ä¼¸æ¬¡æ•°</div>
                        <div class="stat-value" id="stretchCount">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">æŒ¤å‹æ¬¡æ•°</div>
                        <div class="stat-value" id="squishCount">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">äº’åŠ¨æ—¶é—´</div>
                        <div class="stat-value" id="playTime">0s</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">è§£å‹åˆ†æ•°</div>
                        <div class="stat-value" id="score">100</div>
                    </div>
                </div>
            </div>
            
            <div class="achievements">
                <h2><i class="fas fa-trophy"></i> æˆå°±</h2>
                <div class="achievement-list">
                    <div class="achievement unlocked">
                        <i class="fas fa-hand-pointer"></i>
                        <div>
                            <div>é¦–æ¬¡è§¦æ‘¸</div>
                            <small>ç¬¬ä¸€æ¬¡è§¦æ‘¸å²è±å§†</small>
                        </div>
                    </div>
                    <div class="achievement" id="stretchAchievement">
                        <i class="fas fa-expand-alt"></i>
                        <div>
                            <div>æ‹‰ä¼¸å¤§å¸ˆ</div>
                            <small>æ‹‰ä¼¸å²è±å§†50æ¬¡</small>
                        </div>
                    </div>
                    <div class="achievement" id="squishAchievement">
                        <i class="fas fa-compress-alt"></i>
                        <div>
                            <div>æŒ¤å‹ä¸“å®¶</div>
                            <small>æŒ¤å‹å²è±å§†30æ¬¡</small>
                        </div>
                    </div>
                    <div class="achievement" id="timeAchievement">
                        <i class="fas fa-clock"></i>
                        <div>
                            <div>æ—¶é—´ç®¡ç†è€…</div>
                            <small>äº’åŠ¨è¶…è¿‡1åˆ†é’Ÿ</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h2><i class="fas fa-info-circle"></i> ä½¿ç”¨è¯´æ˜</h2>
            <ul>
                <li><strong>ç‚¹å‡»æ‹–åŠ¨</strong> - æ‹‰ä¼¸å²è±å§†åˆ°ä¸åŒæ–¹å‘</li>
                <li><strong>å¿«é€Ÿç‚¹å‡»</strong> - ä½¿å²è±å§†æŒ¯åŠ¨å¹¶äº§ç”Ÿç²’å­æ•ˆæœ</li>
                <li><strong>åŒå‡»</strong> - ä½¿å²è±å§†å¼¹è·³</li>
                <li><strong>é€‰æ‹©ä¸åŒç±»å‹çš„å²è±å§†</strong> - ä½“éªŒä¸åŒç‰©ç†ç‰¹æ€§çš„å²è±å§†</li>
                <li><strong>å°è¯•æ‰€æœ‰äº’åŠ¨æŒ‰é’®</strong> - å‘ç°éšè—æ•ˆæœ</li>
                <li><strong>ç›®æ ‡</strong> - è§£é”æ‰€æœ‰æˆå°±ï¼Œè·å¾—æœ€é«˜è§£å‹åˆ†æ•°ï¼</li>
            </ul>
        </div>
        
        <div class="footer">
            <p>è§£å‹å²è±å§†æ¨¡æ‹Ÿå™¨ ğŸŸ¢ | è®¾è®¡ç”¨äºç¼“è§£å‹åŠ›å’Œç„¦è™‘ | ä½¿ç”¨HTML5ã€CSS3å’ŒJavaScriptæ„å»º</p>
            <p>æ³¨æ„ï¼šæœ¬åº”ç”¨ä»…ç”¨äºå¨±ä¹å’Œè§£å‹ç›®çš„ï¼Œå®é™…æ•ˆæœå¯èƒ½å› è®¾å¤‡è€Œå¼‚</p>
        </div>
    </div>

    <script>
        // æ¸¸æˆçŠ¶æ€å˜é‡
        let gameState = {
            stretchCount: 0,
            squishCount: 0,
            playTime: 0,
            score: 100,
            soundEnabled: true,
            slimeType: 'classic',
            isDragging: false,
            dragStartX: 0,
            dragStartY: 0,
            slimeSize: 150,
            bounceInterval: null,
            achievements: {
                firstTouch: true,
                stretchMaster: false,
                squishExpert: false,
                timeManager: false
            }
        };
        
        // DOMå…ƒç´ 
        const slime = document.getElementById('slime');
        const slimeContainer = document.getElementById('slimeContainer');
        const stretchCountEl = document.getElementById('stretchCount');
        const squishCountEl = document.getElementById('squishCount');
        const playTimeEl = document.getElementById('playTime');
        const scoreEl = document.getElementById('score');
        const bounceBtn = document.getElementById('bounceBtn');
        const shakeBtn = document.getElementById('shakeBtn');
        const resetBtn = document.getElementById('resetBtn');
        const soundToggle = document.getElementById('soundToggle');
        const slimeTypes = document.querySelectorAll('.slime-type');
        
        // åˆå§‹åŒ–å²è±å§†
        function initSlime() {
            updateSlimeAppearance();
            
            // é¼ æ ‡/è§¦æ‘¸äº‹ä»¶
            slime.addEventListener('mousedown', startDrag);
            slime.addEventListener('touchstart', startDrag);
            
            // åŒå‡»äº‹ä»¶
            slime.addEventListener('dblclick', () => {
                bounceSlime();
                if (gameState.soundEnabled) playSound('bounce');
            });
            
            // ç‚¹å‡»äº‹ä»¶ï¼ˆç”¨äºæŒ¯åŠ¨ï¼‰
            slime.addEventListener('click', (e) => {
                if (!gameState.isDragging) {
                    vibrateSlime();
                    createParticles(e.clientX || e.touches[0].clientX, e.clientY || e.touches[0].clientY, 10);
                    if (gameState.soundEnabled) playSound('pop');
                    
                    // è§£é”é¦–æ¬¡è§¦æ‘¸æˆå°±
                    if (gameState.achievements.firstTouch) {
                        gameState.achievements.firstTouch = false;
                        updateScore(10);
                    }
                }
            });
            
            // æ›´æ–°æ¸¸æˆæ—¶é—´
            setInterval(() => {
                gameState.playTime++;
                playTimeEl.textContent = gameState.playTime + 's';
                
                // æ¯10ç§’å¢åŠ ä¸€ç‚¹åˆ†æ•°
                if (gameState.playTime % 10 === 0) {
                    updateScore(5);
                }
                
                // è§£é”æ—¶é—´ç®¡ç†è€…æˆå°±
                if (gameState.playTime >= 60 && !gameState.achievements.timeManager) {
                    gameState.achievements.timeManager = true;
                    document.getElementById('timeAchievement').classList.add('unlocked');
                    updateScore(30);
                    showNotification('æˆå°±è§£é”: æ—¶é—´ç®¡ç†è€…!');
                }
            }, 1000);
        }
        
        // å¼€å§‹æ‹–æ‹½
        function startDrag(e) {
            e.preventDefault();
            gameState.isDragging = true;
            gameState.dragStartX = e.clientX || e.touches[0].clientX;
            gameState.dragStartY = e.clientY || e.touches[0].clientY;
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag);
            document.addEventListener('mouseup', stopDrag);
            document.addEventListener('touchend', stopDrag);
        }
        
        // æ‹–æ‹½ä¸­
        function drag(e) {
            if (!gameState.isDragging) return;
            
            e.preventDefault();
            const clientX = e.clientX || (e.touches && e.touches[0].clientX);
            const clientY = e.clientY || (e.touches && e.touches[0].clientY);
            
            if (!clientX || !clientY) return;
            
            const deltaX = clientX - gameState.dragStartX;
            const deltaY = clientY - gameState.dragStartY;
            
            // è®¡ç®—æ‹‰ä¼¸æ¯”ä¾‹
            const stretchX = 1 + Math.abs(deltaX) / 100;
            const stretchY = 1 + Math.abs(deltaY) / 100;
            
            // æ ¹æ®æ‹–æ‹½æ–¹å‘åº”ç”¨å˜æ¢
            let transform = '';
            
            if (Math.abs(deltaX) > Math.abs(deltaY)) {
                // æ°´å¹³æ‹‰ä¼¸
                transform = `scaleX(${stretchX}) scaleY(${1.5 - stretchX * 0.5})`;
                gameState.stretchCount++;
                stretchCountEl.textContent = gameState.stretchCount;
                
                // æ¯æ‹‰ä¼¸5æ¬¡å¢åŠ åˆ†æ•°
                if (gameState.stretchCount % 5 === 0) {
                    updateScore(5);
                    createParticles(clientX, clientY, 5);
                }
                
                // è§£é”æ‹‰ä¼¸å¤§å¸ˆæˆå°±
                if (gameState.stretchCount >= 50 && !gameState.achievements.stretchMaster) {
                    gameState.achievements.stretchMaster = true;
                    document.getElementById('stretchAchievement').classList.add('unlocked');
                    updateScore(50);
                    showNotification('æˆå°±è§£é”: æ‹‰ä¼¸å¤§å¸ˆ!');
                }
            } else {
                // å‚ç›´æŒ¤å‹
                transform = `scaleY(${stretchY}) scaleX(${1.5 - stretchY * 0.5})`;
                gameState.squishCount++;
                squishCountEl.textContent = gameState.squishCount;
                
                // æ¯æŒ¤å‹5æ¬¡å¢åŠ åˆ†æ•°
                if (gameState.squishCount % 5 === 0) {
                    updateScore(5);
                    createParticles(clientX, clientY, 5);
                }
                
                // è§£é”æŒ¤å‹ä¸“å®¶æˆå°±
                if (gameState.squishCount >= 30 && !gameState.achievements.squishExpert) {
                    gameState.achievements.squishExpert = true;
                    document.getElementById('squishAchievement').classList.add('unlocked');
                    updateScore(50);
                    showNotification('æˆå°±è§£é”: æŒ¤å‹ä¸“å®¶!');
                }
            }
            
            // åº”ç”¨å˜æ¢
            slime.style.transform = transform;
            
            // æ’­æ”¾å£°éŸ³
            if (gameState.soundEnabled && (gameState.stretchCount % 3 === 0 || gameState.squishCount % 3 === 0)) {
                playSound('squish');
            }
            
            // æ›´æ–°èµ·å§‹ä½ç½®ä»¥å®ç°è¿ç»­æ‹–æ‹½
            gameState.dragStartX = clientX;
            gameState.dragStartY = clientY;
        }
        
        // åœæ­¢æ‹–æ‹½
        function stopDrag() {
            gameState.isDragging = false;
            
            // æ¢å¤å²è±å§†å½¢çŠ¶
            slime.style.transition = 'transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)';
            slime.style.transform = 'scale(1)';
            
            // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('touchmove', drag);
            document.removeEventListener('mouseup', stopDrag);
            document.removeEventListener('touchend', stopDrag);
            
            // ç§»é™¤è¿‡æ¸¡æ•ˆæœ
            setTimeout(() => {
                slime.style.transition = 'transform 0.1s';
            }, 500);
        }
        
        // å¼¹è·³å²è±å§†
        function bounceSlime() {
            slime.classList.add('bounce');
            
            // åˆ›å»ºå¼¹è·³ç²’å­
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const rect = slime.getBoundingClientRect();
                    createParticles(
                        rect.left + rect.width / 2, 
                        rect.top + rect.height / 2, 
                        3
                    );
                }, i * 50);
            }
            
            setTimeout(() => {
                slime.classList.remove('bounce');
            }, 800);
            
            updateScore(10);
        }
        
        // æŒ¯åŠ¨å²è±å§†
        function vibrateSlime() {
            slime.classList.add('vibrate');
            setTimeout(() => {
                slime.classList.remove('vibrate');
            }, 300);
            
            updateScore(5);
        }
        
        // åˆ›å»ºç²’å­æ•ˆæœ
        function createParticles(x, y, count) {
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                // æ ¹æ®å²è±å§†ç±»å‹è®¾ç½®ç²’å­é¢œè‰²
                let color;
                switch(gameState.slimeType) {
                    case 'classic': color = '#4CAF50'; break;
                    case 'jelly': color = '#2196F3'; break;
                    case 'glitter': color = '#9C27B0'; break;
                    case 'bouncy': color = '#FF9800'; break;
                    case 'gooey': color = '#00BCD4'; break;
                }
                
                particle.style.backgroundColor = color;
                particle.style.width = Math.random() * 15 + 5 + 'px';
                particle.style.height = particle.style.width;
                particle.style.left = x + 'px';
                particle.style.top = y + 'px';
                
                document.body.appendChild(particle);
                
                // éšæœºæ–¹å‘åŠ¨ç”»
                const angle = Math.random() * Math.PI * 2;
                const speed = Math.random() * 3 + 2;
                const duration = Math.random() * 1000 + 500;
                
                const animate = () => {
                    const currentLeft = parseFloat(particle.style.left);
                    const currentTop = parseFloat(particle.style.top);
                    
                    particle.style.left = (currentLeft + Math.cos(angle) * speed) + 'px';
                    particle.style.top = (currentTop + Math.sin(angle) * speed) + 'px';
                    particle.style.opacity = parseFloat(particle.style.opacity) - 0.01;
                    
                    if (parseFloat(particle.style.opacity) > 0) {
                        requestAnimationFrame(animate);
                    } else {
                        document.body.removeChild(particle);
                    }
                };
                
                // å¼€å§‹åŠ¨ç”»
                requestAnimationFrame(animate);
                
                // è‡ªåŠ¨ç§»é™¤ç²’å­
                setTimeout(() => {
                    if (particle.parentNode) {
                        document.body.removeChild(particle);
                    }
                }, 1500);
            }
        }
        
        // æ’­æ”¾éŸ³æ•ˆ
        function playSound(type) {
            // åˆ›å»ºéŸ³é¢‘ä¸Šä¸‹æ–‡
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            
            if (type === 'pop') {
                // å¼¹å‡ºå£°éŸ³
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.1);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            } 
            else if (type === 'squish') {
                // æŒ¤å‹å£°éŸ³
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(100, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(60, audioContext.currentTime + 0.2);
                
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.2);
            }
            else if (type === 'bounce') {
                // å¼¹è·³å£°éŸ³
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.setValueAtTime(150, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(100, audioContext.currentTime + 0.3);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            }
        }
        
        // æ›´æ–°åˆ†æ•°
        function updateScore(points) {
            gameState.score += points;
            scoreEl.textContent = gameState.score;
            
            // æ·»åŠ åˆ†æ•°åŠ¨ç”»
            scoreEl.style.transform = 'scale(1.2)';
            scoreEl.style.color = '#FFCC00';
            
            setTimeout(() => {
                scoreEl.style.transform = 'scale(1)';
                scoreEl.style.color = '#7afcff';
            }, 300);
        }
        
        // æ›´æ–°å²è±å§†å¤–è§‚
        function updateSlimeAppearance() {
            // ç§»é™¤æ‰€æœ‰ç°æœ‰æ ·å¼ç±»
            slime.className = '';
            slime.classList.add(`slime-${gameState.slimeType}`);
            
            // è®¾ç½®åŸºç¡€æ ·å¼
            slime.style.width = gameState.slimeSize + 'px';
            slime.style.height = gameState.slimeSize + 'px';
            slime.style.borderRadius = '50%';
            slime.style.position = 'absolute';
            
            // æ ¹æ®ç±»å‹åº”ç”¨ä¸åŒæ ·å¼
            switch(gameState.slimeType) {
                case 'classic':
                    slime.style.background = 'linear-gradient(135deg, #4CAF50, #8BC34A)';
                    slime.style.boxShadow = 'inset -20px -20px 30px rgba(0,0,0,0.2), inset 10px 10px 20px rgba(255,255,255,0.3)';
                    break;
                case 'jelly':
                    slime.style.background = 'linear-gradient(135deg, #2196F3, #03A9F4)';
                    slime.style.boxShadow = 'inset -20px -20px 30px rgba(0,0,0,0.2), inset 10px 10px 20px rgba(255,255,255,0.5)';
                    slime.style.opacity = '0.8';
                    break;
                case 'glitter':
                    slime.style.background = 'linear-gradient(135deg, #9C27B0, #E91E63)';
                    slime.style.boxShadow = 'inset -20px -20px 30px rgba(0,0,0,0.2), inset 10px 10px 20px rgba(255,255,255,0.4), 0 0 20px rgba(255,255,255,0.5)';
                    break;
                case 'bouncy':
                    slime.style.background = 'linear-gradient(135deg, #FF9800, #FFC107)';
                    slime.style.boxShadow = 'inset -20px -20px 30px rgba(0,0,0,0.2), inset 10px 10px 20px rgba(255,255,255,0.4)';
                    break;
                case 'gooey':
                    slime.style.background = 'linear-gradient(135deg, #00BCD4, #009688)';
                    slime.style.boxShadow = 'inset -20px -20px 30px rgba(0,0,0,0.2), inset 10px 10px 20px rgba(255,255,255,0.3)';
                    slime.style.opacity = '0.9';
                    break;
            }
        }
        
        // æ˜¾ç¤ºé€šçŸ¥
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.backgroundColor = '#4a4aff';
            notification.style.color = 'white';
            notification.style.padding = '15px 20px';
            notification.style.borderRadius = '10px';
            notification.style.zIndex = '1000';
            notification.style.boxShadow = '0 5px 15px rgba(0,0,0,0.3)';
            notification.style.fontWeight = 'bold';
            notification.style.transform = 'translateX(150%)';
            notification.style.transition = 'transform 0.5s';
            
            document.body.appendChild(notification);
            
            // æ˜¾ç¤ºé€šçŸ¥
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 10);
            
            // éšè—é€šçŸ¥
            setTimeout(() => {
                notification.style.transform = 'translateX(150%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        document.body.removeChild(notification);
                    }
                }, 500);
            }, 3000);
        }
        
        // é‡ç½®æ¸¸æˆ
        function resetGame() {
            gameState.stretchCount = 0;
            gameState.squishCount = 0;
            gameState.playTime = 0;
            gameState.score = 100;
            
            stretchCountEl.textContent = '0';
            squishCountEl.textContent = '0';
            playTimeEl.textContent = '0s';
            scoreEl.textContent = '100';
            
            // é‡ç½®å²è±å§†ä½ç½®å’Œå¤§å°
            slime.style.transform = 'scale(1) translate(0, 0)';
            updateSlimeAppearance();
            
            showNotification('æ¸¸æˆå·²é‡ç½®!');
        }
        
        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // å²è±å§†ç±»å‹é€‰æ‹©
            slimeTypes.forEach(type => {
                type.addEventListener('click', () => {
                    // ç§»é™¤æ‰€æœ‰activeç±»
                    slimeTypes.forEach(t => t.classList.remove('active'));
                    // æ·»åŠ activeç±»åˆ°å½“å‰ç±»å‹
                    type.classList.add('active');
                    // æ›´æ–°å²è±å§†ç±»å‹
                    gameState.slimeType = type.dataset.type;
                    updateSlimeAppearance();
                    
                    // æ’­æ”¾å£°éŸ³
                    if (gameState.soundEnabled) playSound('pop');
                    updateScore(5);
                });
            });
            
            // å¼¹è·³æŒ‰é’®
            bounceBtn.addEventListener('click', () => {
                bounceSlime();
                if (gameState.soundEnabled) playSound('bounce');
            });
            
            // æŒ¯åŠ¨æŒ‰é’®
            shakeBtn.addEventListener('click', () => {
                vibrateSlime();
                createParticles(
                    slimeContainer.offsetLeft + slimeContainer.offsetWidth / 2,
                    slimeContainer.offsetTop + slimeContainer.offsetHeight / 2,
                    20
                );
                if (gameState.soundEnabled) playSound('pop');
            });
            
            // é‡ç½®æŒ‰é’®
            resetBtn.addEventListener('click', resetGame);
            
            // éŸ³æ•ˆåˆ‡æ¢
            soundToggle.addEventListener('click', () => {
                gameState.soundEnabled = !gameState.soundEnabled;
                soundToggle.innerHTML = gameState.soundEnabled ? 
                    '<i class="fas fa-volume-up"></i> éŸ³æ•ˆ' : 
                    '<i class="fas fa-volume-mute"></i> é™éŸ³';
                
                // æ’­æ”¾æµ‹è¯•å£°éŸ³
                if (gameState.soundEnabled) playSound('pop');
            });
        }
        
        // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
        window.addEventListener('DOMContentLoaded', () => {
            initSlime();
            initEventListeners();
            
            // æ˜¾ç¤ºæ¬¢è¿é€šçŸ¥
            setTimeout(() => {
                showNotification('æ¬¢è¿æ¥åˆ°å²è±å§†è§£å‹æ¨¡æ‹Ÿå™¨ï¼å¼€å§‹æ‹‰ä¼¸å’ŒæŒ¤å‹å²è±å§†å§ï¼');
            }, 1000);
        });
    </script>
</body>
</html>
